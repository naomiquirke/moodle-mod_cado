/*
 * Provides interface for users to edit courseflow activity flow on the
 * courseflow mod editing form.
 *
 * @package    mod_courseflow
 * @copyright  2020 Naomi Quirke
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
*/
define("mod_cado/filterform",[],(function(){return{init:function(cadolist){const cadoids=Object.entries(JSON.parse(document.querySelector(cadolist).value));document.querySelectorAll("select[id^='id_compare']").forEach((function(dateselect){dateselect.addEventListener("change",updatechoices)}));const coursename=document.getElementById("id_coursename");coursename.addEventListener("change",updatechoices);const cadochoice=document.getElementById("id_cadoid");function updatechoices(){for(;cadochoice.firstChild;)cadochoice.removeChild(cadochoice.firstChild);cadochoice.insertAdjacentHTML("afterbegin",'<option value="0">---</option>'),cadochoice.selectedIndex=0;let sdate=new Date(document.getElementById("id_comparestartdate_year").value,document.getElementById("id_comparestartdate_month").value-1,document.getElementById("id_comparestartdate_day").value),startdate=Math.floor(sdate.getTime()/1e3),edate=new Date(document.getElementById("id_compareenddate_year").value,document.getElementById("id_compareenddate_month").value,document.getElementById("id_compareenddate_day").value),enddate=Math.floor(edate.getTime()/1e3);cadoids.forEach((function(value){value[1].startdate>=startdate&&value[1].startdate<=enddate&&value[1].shortname.indexOf(coursename.value)>=0&&cadochoice.insertAdjacentHTML("afterbegin","<option value=".concat(value[0],">").concat(value[1].shortname," --- ").concat(value[1].name,"</option>"))}))}updatechoices()}}}));

//# sourceMappingURL=filterform.min.js.map