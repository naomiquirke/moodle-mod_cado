{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

}}
{{!
    @template mod_cado/cado

    Displays main CADO report

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * none

    Example context (json):
    {
    "schedheads": {
        "section": "Section",
        "startdate": null,
        "name": "Topic",
        "task": "Task",
        "date": "Date due"
    },
    "weekly": false,
    "tagsinsched": 3,
    "headtag0": "Word count",
    "headtag1": "Final grade %",
    "headtag2": "Hours",
    "schedule": {
      "0": {
          "tasks": {},
          "section": 0,
          "startdate": null,
          "sum": 0,
          "name": "General sections "
      },
      "1": {
          "tasks": {
              "0": {
                  "name": "Awesome quiz 1  (LO:3 5%)",
                  "date": "22/07/20, 14:33",
                  "tag0": "",
                  "tag1": "",
                  "tag2": 10
              }
          },
          "section": 1,
          "startdate": null,
          "sum": 0,
          "name": "Topic 1 "
      },
      "2": {
          "tasks": {
              "0": {
                  "name": "Important forum (LO:3 0%)",
                  "date": "22/12/20, 13:51",
                  "tag0": "",
                  "tag1": "",
                  "tag2": ""
              },
              "1": {
                  "name": "a1 with rubric (80% LO:1)",
                  "date": "2/01/21, 05:00",
                  "tag0": 1000,
                  "tag1": 80,
                  "tag2": 30
              }
          },
          "section": 2,
          "startdate": null,
          "sum": 0,
          "name": " "
      },
      "3": {
          "tasks": {
              "0": {
                  "name": "Less important but still important forum",
                  "date": "22/10/20, 13:51",
                  "tag0": "",
                  "tag1": "",
                  "tag2": ""
              },
              "1": {
                  "name": "a2 no rubric (5% LO:2) ",
                  "date": "2/01/21, 05:00",
                  "tag0": "",
                  "tag1": "",
                  "tag2": 30
              }
          },
          "section": 3,
          "startdate": null,
          "sum": 0,
          "name": " "
      },
      "4": {
          "tasks": {
              "0": {
                  "name": "",
                  "date": "",
                  "tag0": 1000,
                  "tag1": 80,
                  "tag2": 70
              }
          },
          "section": "",
          "startdate": null,
          "sum": 1,
          "name": "TOTALS "
        }
    }
}}
  <div id="cado-schedule">
    <h2>{{# str }} schedule, mod_cado {{/ str }}</h2>
    <table class="table table-hover table-bordered">
      <thead>
        {{#schedheads}}
          <tr class="cado-t01">
            <th class="cado-tc1">{{section}}</th>
            {{#weekly}}<th class="cado-tc2">{{startdate}}</th>{{/weekly}}
            <th class="cado-tc3">{{name}}</th>
            <th class="cado-t02">
              <table class="table table-hover cado-inner-table">
                <tr class="cado-t03">
                  <th class="cado-tc3">{{task}}</th>
                  <th class="cado-tc2">{{date}}</th>
                  {{#headtag0}}<th class="cado-tc1">{{headtag0}}</th>{{/headtag0}}
                  {{#headtag1}}<th class="cado-tc1">{{headtag1}}</th>{{/headtag1}}
                  {{#headtag2}}<th class="cado-tc1">{{headtag2}}</th>{{/headtag2}}
                </tr>
              </table>
            </th>
          </tr>
        {{/schedheads}}
      </thead>
      <tbody>
        {{#schedule}}
          <tr class="cado-t01">
            <td class="cado-tc1">{{^sum}}{{section}}{{/sum}}</td>
            {{#weekly}}<td class="cado-tc2">{{startdate}}</td>{{/weekly}}
            <td class="cado-tc3{{#sum}} cado-sched-total{{/sum}}">{{name}} </td> 
            <td class="cado-t02">
              <table class="table table-hover cado-inner-table">
                {{#tasks}}
                  {{#.}}
                    <tr class="cado-t03">
                      <td class="cado-tc3">{{^sum}}{{name}}{{/sum}}</td>
                      <td class="cado-tc2">{{date}}</td>
                      {{#headtag0}}<td class="cado-tc1{{#sum}} cado-sched-total{{/sum}}">{{tag0}}</td>{{/headtag0}}
                      {{#headtag1}}<td class="cado-tc1{{#sum}} cado-sched-total{{/sum}}">{{tag1}}</td>{{/headtag1}}
                      {{#headtag2}}<td class="cado-tc1{{#sum}} cado-sched-total{{/sum}}">{{tag2}}</td>{{/headtag2}}
                    </tr>
                  {{/.}}
                {{/tasks}}
              </table>
            </td>
          </tr> 
        {{/schedule}}
      </tbody>
    </table>
  </div>
